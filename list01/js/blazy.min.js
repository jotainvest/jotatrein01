!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.Blazy=b()}(this,function(){"use strict";function a(a){var c=a._util;c.elements=o(a.options),c.count=c.elements.length,c.destroyed&&(c.destroyed=!1,a.options.container&&s(a.options.container,function(a){q(a,"scroll",c.validateT)}),q(window,"resize",c.saveViewportOffsetT),q(window,"resize",c.validateT),q(window,"scroll",c.validateT)),b(a)}function b(a){for(var b=a._util,d=0;d<b.count;d++){var e=b.elements[d];(c(e,a.options)||m(e,a.options.successClass))&&(a.load(e),b.elements.splice(d,1),b.count--,d--)}0===b.count&&a.destroy()}function c(a,b){var c=a.getBoundingClientRect();if(b.container&&x){var e=a.closest(b.containerClass);if(e){var f=e.getBoundingClientRect();if(d(f,v)){var g=f.top-b.offset,h=f.right+b.offset,i=f.bottom+b.offset,j=f.left-b.offset,k={top:g>v.top?g:v.top,right:h<v.right?h:v.right,bottom:i<v.bottom?i:v.bottom,left:j>v.left?j:v.left};return d(c,k)}return!1}}return d(c,v)}function d(a,b){return a.right>=b.left&&a.bottom>=b.top&&a.left<=b.right&&a.top<=b.bottom}function e(a,b,c){if(!m(a,c.successClass)&&(b||c.loadInvisible||a.offsetWidth>0&&a.offsetHeight>0)){var d=j(a,u)||j(a,c.src);if(d){var e=d.split(c.separator),i=e[w&&e.length>1?1:0],k=j(a,c.srcset),o=l(a,"img"),p=a.parentNode,t=p&&l(p,"picture");if(o||void 0===a.src){var v=new Image,x=function(){c.error&&c.error(a,"invalid"),n(a,c.errorClass),r(v,"error",x),r(v,"load",A)},A=function(){o?t||h(a,i,k):a.style.backgroundImage='url("'+i+'")',f(a,c),r(v,"load",A),r(v,"error",x)};t&&(v=a,s(p.getElementsByTagName("source"),function(a){g(a,z,c.srcset)})),q(v,"error",x),q(v,"load",A),h(v,i,k)}else a.src=i,f(a,c)}else l(a,"video")?(s(a.getElementsByTagName("source"),function(a){g(a,y,c.src)}),a.load(),f(a,c)):(c.error&&c.error(a,"missing"),n(a,c.errorClass))}}function f(a,b){n(a,b.successClass),b.success&&b.success(a),k(a,b.src),k(a,b.srcset),s(b.breakpoints,function(b){k(a,b.src)})}function g(a,b,c){var d=j(a,c);d&&(i(a,b,d),k(a,c))}function h(a,b,c){c&&i(a,z,c),a.src=b}function i(a,b,c){a.setAttribute(b,c)}function j(a,b){return a.getAttribute(b)}function k(a,b){a.removeAttribute(b)}function l(a,b){return a.nodeName.toLowerCase()===b}function m(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")!==-1}function n(a,b){m(a,b)||(a.className+=" "+b)}function o(a){for(var b=[],c=a.root.querySelectorAll(a.selector),d=c.length;d--;b.unshift(c[d]));return b}function p(a){v.bottom=(window.innerHeight||document.documentElement.clientHeight)+a,v.right=(window.innerWidth||document.documentElement.clientWidth)+a}function q(a,b,c){a.attachEvent?a.attachEvent&&a.attachEvent("on"+b,c):a.addEventListener(b,c,{capture:!1,passive:!0})}function r(a,b,c){a.detachEvent?a.detachEvent&&a.detachEvent("on"+b,c):a.removeEventListener(b,c,{capture:!1,passive:!0})}function s(a,b){if(a&&b)for(var c=a.length,d=0;d<c&&b(a[d],d)!==!1;d++);}function t(a,b,c){var d=0;return function(){var e=+new Date;e-d<b||(d=e,a.apply(c,arguments))}}var u,v,w,x,y="src",z="srcset";return function(c){if(!document.querySelectorAll){var d=document.createStyleSheet();document.querySelectorAll=function(a,b,c,e,f){for(f=document.all,b=[],a=a.replace(/\[for\b/gi,"[htmlFor").split(","),c=a.length;c--;){for(d.addRule(a[c],"k:v"),e=f.length;e--;)f[e].currentStyle.k&&b.push(f[e]);d.removeRule(0)}return b}}var f=this,g=f._util={};g.elements=[],g.destroyed=!0,f.options=c||{},f.options.error=f.options.error||!1,f.options.offset=f.options.offset||100,f.options.root=f.options.root||document,f.options.success=f.options.success||!1,f.options.selector=f.options.selector||".b-lazy",f.options.separator=f.options.separator||"|",f.options.containerClass=f.options.container,f.options.container=!!f.options.containerClass&&document.querySelectorAll(f.options.containerClass),f.options.errorClass=f.options.errorClass||"b-error",f.options.breakpoints=f.options.breakpoints||!1,f.options.loadInvisible=f.options.loadInvisible||!1,f.options.successClass=f.options.successClass||"b-loaded",f.options.validateDelay=f.options.validateDelay||25,f.options.saveViewportOffsetDelay=f.options.saveViewportOffsetDelay||50,f.options.srcset=f.options.srcset||"data-srcset",f.options.src=u=f.options.src||"data-src",x=Element.prototype.closest,w=window.devicePixelRatio>1,v={},v.top=0-f.options.offset,v.left=0-f.options.offset,f.revalidate=function(){a(f)},f.load=function(a,b){var c=this.options;a&&void 0===a.length?e(a,b,c):s(a,function(a){e(a,b,c)})},f.destroy=function(){var a=f._util;f.options.container&&s(f.options.container,function(b){r(b,"scroll",a.validateT)}),r(window,"scroll",a.validateT),r(window,"resize",a.validateT),r(window,"resize",a.saveViewportOffsetT),a.count=0,a.elements.length=0,a.destroyed=!0},g.validateT=t(function(){b(f)},f.options.validateDelay,f),g.saveViewportOffsetT=t(function(){p(f.options.offset)},f.options.saveViewportOffsetDelay,f),p(f.options.offset),s(f.options.breakpoints,function(a){if(a.width>=window.screen.width)return u=a.src,!1}),setTimeout(function(){a(f)})}});

var offset_height =  window.innerHeight;
    offset_height =  offset_height > 768 ? offset_height : 768;

var bLazy = new Blazy();

//Adjust bug Safari
setTimeout(function(){
    bLazy.revalidate();
}, 1000);
